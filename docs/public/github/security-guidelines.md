# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºèªã‚¬ã‚¤ãƒ‰ ğŸ”’

*æœ€çµ‚æ›´æ–°: 2025å¹´11æœˆ9æ—¥*

## ğŸ¯ ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆæƒ…å ±ä¿è­·ã®é‡è¦ãƒã‚¤ãƒ³ãƒˆ

### âœ… å®‰å…¨ãªç¾åœ¨ã®è¨­å®š

```gitignore
# ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ»å€‹äººæƒ…å ±ï¼ˆçµ¶å¯¾ã«å…¬é–‹ã•ã‚Œãªã„ï¼‰
docs/private/
docs/draft/

# ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«
*.tmp
*.temp
.DS_Store
Thumbs.db

# å€‹äººè¨­å®šãƒ»æ©Ÿå¯†æƒ…å ±
.env
.env.local
config/personal/
```

### ğŸš¨ çµ¶å¯¾ã«é¿ã‘ã‚‹ã¹ãé–“é•ã„

1. **ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€åº¦ã§ã‚‚ã‚³ãƒŸãƒƒãƒˆ**
   ```bash
   # âŒ å±é™º: ä¸€åº¦ã§ã‚‚ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã¨å±¥æ­´ã«æ®‹ã‚‹
   git add docs/private/personal-info.md
   git commit -m "å€‹äººæƒ…å ±è¿½åŠ "  # ã“ã®æ™‚ç‚¹ã§æ°¸ç¶šçš„ã«è¨˜éŒ²ã•ã‚Œã‚‹
   ```

2. **å¾Œã‹ã‚‰.gitignoreã«è¿½åŠ **
   ```bash
   # âŒ æ—¢ã«ã‚³ãƒŸãƒƒãƒˆæ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«ã¯.gitignoreåŠ¹æœãªã—
   # å±¥æ­´ã‹ã‚‰å®Œå…¨å‰Šé™¤ãŒå¿…è¦
   ```

### ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

#### ğŸ“‹ ã‚³ãƒŸãƒƒãƒˆå‰ãƒã‚§ãƒƒã‚¯
- [ ] `git status`ã§è¿½åŠ ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
- [ ] `docs/private/`é…ä¸‹ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„ã‹ç¢ºèª
- [ ] å€‹äººæƒ…å ±ï¼ˆåå‰ã€ä½æ‰€ã€é›»è©±ç•ªå·ç­‰ï¼‰å«æœ‰ç¢ºèª
- [ ] æ©Ÿå¯†æƒ…å ±ï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€API Keyç­‰ï¼‰å«æœ‰ç¢ºèª

#### ğŸ“‹ å®šæœŸã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»
- [ ] ã‚³ãƒŸãƒƒãƒˆå±¥æ­´ã«æ©Ÿå¯†æƒ…å ±ãŒãªã„ã‹ç¢ºèª
  ```bash
  # æ©Ÿå¯†æƒ…å ±ã®æ¤œç´¢
  git log --all --grep="password\|secret\|key\|personal"
  git log -p --all | grep -i "password\|secret\|key\|api"
  ```

- [ ] ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã®æ©Ÿå¯†æƒ…å ±ã‚¹ã‚­ãƒ£ãƒ³
  ```bash
  # ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹æ¤œç´¢
  grep -r "password\|secret\|key" docs/public/
  ```

### ğŸ”§ ç·Šæ€¥æ™‚ã®å¯¾å‡¦æ³•

#### ğŸš¨ é–“é•ã£ã¦æ©Ÿå¯†æƒ…å ±ã‚’ã‚³ãƒŸãƒƒãƒˆã—ãŸå ´åˆ

1. **å³åº§ã®å¯¾å¿œ**
   ```bash
   # æœ€æ–°ã‚³ãƒŸãƒƒãƒˆã‹ã‚‰å‰Šé™¤ï¼ˆã¾ã ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã„ãªã„å ´åˆï¼‰
   git reset --soft HEAD~1
   git reset HEAD docs/private/secret-file.md
   ```

2. **å±¥æ­´ã‹ã‚‰ã®å®Œå…¨å‰Šé™¤**
   ```bash
   # git filter-branchã§å±¥æ­´ã‹ã‚‰å®Œå…¨å‰Šé™¤
   git filter-branch --force --index-filter \
   'git rm --cached --ignore-unmatch docs/private/secret-file.md' \
   --prune-empty --tag-name-filter cat -- --all
   ```

3. **å¼·åˆ¶ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆæ—¢ã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã„ã‚‹å ´åˆï¼‰**
   ```bash
   git push origin --force --all
   git push origin --force --tags
   ```

âš ï¸ **æ³¨æ„**: å¼·åˆ¶ãƒ—ãƒƒã‚·ãƒ¥ã¯ä»–ã®è²¢çŒ®è€…ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

#### ğŸ”„ ãƒªãƒã‚¸ãƒˆãƒªå†ä½œæˆï¼ˆæœ€çµ‚æ‰‹æ®µï¼‰

é‡å¤§ãªæ©Ÿå¯†æƒ…å ±ãŒæ¼æ´©ã—ãŸå ´åˆï¼š

1. æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆ
2. æ©Ÿå¯†æƒ…å ±ã‚’é™¤ã„ãŸã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã§ç§»è¡Œ
3. å¤ã„ãƒªãƒã‚¸ãƒˆãƒªã‚’å‰Šé™¤
4. é–¢é€£ã™ã‚‹èªè¨¼æƒ…å ±ï¼ˆAPI Keyç­‰ï¼‰ã‚’ã™ã¹ã¦å¤‰æ›´

## ğŸ¯ æ¨å¥¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ğŸ“ å®‰å…¨ãªãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæ‰‹é †

```mermaid
flowchart TD
    A[æ–°è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ] --> B{æ©Ÿå¯†æƒ…å ±å«ã‚€ï¼Ÿ}
    B -->|Yes| C[docs/private/ã«ä½œæˆ]
    B -->|No| D[docs/public/ã«ä½œæˆ]
    B -->|ä¸æ˜| E[docs/draft/ã«ä½œæˆ]
    
    C --> F[ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ã¿ç®¡ç†]
    D --> G[ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾Œã‚³ãƒŸãƒƒãƒˆ]
    E --> H{å†…å®¹ç¢ºèªå¾Œåˆ¤æ–­}
    
    H -->|æ©Ÿå¯†| C
    H -->|å…¬é–‹OK| I[docs/public/ã«ç§»å‹•]
```

### ğŸ” ã‚³ãƒŸãƒƒãƒˆå‰ç¢ºèªã‚³ãƒãƒ³ãƒ‰

```bash
# å®‰å…¨ç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾‹
#!/bin/bash
echo "ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯é–‹å§‹..."

# è¿½åŠ äºˆå®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
echo "ğŸ“ è¿½åŠ äºˆå®šãƒ•ã‚¡ã‚¤ãƒ«:"
git diff --cached --name-only

# ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„ã‹ç¢ºèª
if git diff --cached --name-only | grep -q "docs/private/"; then
    echo "ğŸš¨ ã‚¨ãƒ©ãƒ¼: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼"
    echo "ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„:"
    git diff --cached --name-only | grep "docs/private/"
    exit 1
fi

# æ©Ÿå¯†æƒ…å ±ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œç´¢
echo "ğŸ” æ©Ÿå¯†æƒ…å ±ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œç´¢..."
if git diff --cached | grep -i "password\|secret\|key\|api_key\|token"; then
    echo "âš ï¸  è­¦å‘Š: æ©Ÿå¯†æƒ…å ±ã®å¯èƒ½æ€§ãŒã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œå‡º"
    echo "å†…å®¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„"
    exit 1
fi

echo "âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯å®Œäº† - å®‰å…¨ã§ã™"
```

## ğŸ“š å‚è€ƒè³‡æ–™

- [GitHub - Removing sensitive data](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository)
- [Git - git-filter-branch](https://git-scm.com/docs/git-filter-branch)
- [BFG Repo-Cleaner](https://rtyley.github.io/bfg-repo-cleaner/) - å±¥æ­´ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ãƒ„ãƒ¼ãƒ«

---

*ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆæƒ…å ±ã®ä¿è­·ã¯ã€ä¸€åº¦ã®é–“é•ã„ãŒè‡´å‘½çš„ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ…é‡ãªç®¡ç†ã‚’å¿ƒãŒã‘ã¦ãã ã•ã„ã€‚*